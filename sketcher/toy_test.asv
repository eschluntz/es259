% Toy script
% tests the pipeline with a small toy example

clear;
close all;
addpath('matlab_bgl');
% fake data
%img = tril(ones(500));
%img = [ones(100,25), zeros(100,75)];
%edge_im = edge(img);
img = rgb2gray(imread('data/raw/steve.jpg'));
edge_im = double(imread('data/pb/pb_1.png'));
edge_im = edge_im / max(edge_im(:));
edge_im = edge_im .* (edge_im > .1);

% connect image
se = strel('disk',1);
edge_im = imclose(edge_im,se);

% data structure
G = sparse(numel(img),numel(img),8*numel(img));
Curves = zeros(1000,50);

% start process
disp('generating edges');
%[G] = generate_segments(G,edge_im);
generate_segments;
